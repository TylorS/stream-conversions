{"version":3,"file":"stream-conversions.js","sources":["../src/interfaces.js","../src/is.js","../src/to.js","../src/index.js"],"sourcesContent":["const mostInterface = (stream, observer) => {\n  stream\n    .observe(x => observer.onNext(x))\n    .then(x => observer.onCompleted(x))\n    .catch(x => observer.onError(x))\n}\n\nconst rxInterface = (stream, observer) => {\n  stream.subscribe(\n    x => observer.onNext(x),\n    x => observer.onError(x),\n    x => observer.onCompleted(x)\n  )\n}\n\nconst baconInterface = (stream, observer) => {\n  stream.onValue(x => observer.onNext(x))\n  stream.onError(x => observer.onError(x))\n  stream.onEnd(x => observer.onCompleted(x))\n}\n\nconst kefirInterface = (stream, observer) => {\n  stream.onValue(x => observer.onNext(x))\n  stream.onError(x => observer.onError(x))\n  stream.onEnd(x => observer.onCompleted(x))\n}\n\nconst xstreamInterface = (stream, observer) => {\n  stream.addListener({\n    next: x => observer.onNext(x),\n    error: x => observer.onError(x),\n    complete: x => observer.onCompleted(x),\n  })\n}\n\nconst interfaces = {\n  most: mostInterface,\n  rx: rxInterface,\n  bacon: baconInterface,\n  kefir: kefirInterface,\n  xstream: xstreamInterface,\n}\n\nexport default interfaces\n","const message = lib => `Stream provided is not a ${lib} stream`\n\nfunction isMost(stream) {\n  if (typeof stream.observe !== 'function') {\n    throw new Error(message('most'))\n  }\n}\n\nfunction isRx(stream) {\n  if (typeof stream.subscribe !== 'function' || typeof stream.onValue === `function`) {\n    throw new Error(message('rx'))\n  }\n}\n\nfunction isBacon(stream) {\n  if (typeof stream.onValue !== 'function' || typeof stream.onAny === `function`) {\n    throw new Error(message('bacon'))\n  }\n}\n\nfunction isKefir(stream) {\n  if (typeof stream.onAny !== `function`) {\n    throw new Error(message('kefir'))\n  }\n}\n\nfunction isXstream(stream) {\n  if (typeof stream.addListener !== `function`) {\n    throw new Error(message('xstream'))\n  }\n}\n\nconst is = {\n  most: isMost,\n  rx: isRx,\n  bacon: isBacon,\n  kefir: isKefir,\n  xstream: isXstream,\n}\n\nexport default is\n","import Most from 'most'\nimport {Observable} from 'rx'\nimport Bacon from 'baconjs'\nimport Kefir  from 'kefir'\nimport Xstream from 'xstream'\n\nconst toMost = (stream, streamInterface) =>\n  Most.create((add, end, error) => {\n    const observer = {\n      onNext: add,\n      onCompleted: end,\n      onError: error,\n    }\n    streamInterface(stream, observer)\n  })\n\nconst toRx = (stream, streamInterface) => Observable.create(observer => {\n  streamInterface(stream, observer)\n})\n\nconst toBacon = (stream, streamInterface) =>\n  Bacon.fromBinder(sink => {\n    const observer = {\n      onNext: x => sink(new Bacon.Next(x)),\n      onCompleted: x => sink(new Bacon.End(x)),\n      onError: x => sink(new Bacon.Error(x)),\n    }\n    streamInterface(stream, observer)\n  })\n\nconst toKefir = (stream, streamInterface) =>\n  Kefir.stream(emitter => {\n    const observer = {\n      onNext: x => emitter.emit(x),\n      onError: x => emitter.error(x),\n      onCompleted: x => emitter.end(x),\n    }\n    streamInterface(stream, observer)\n  })\n\nconst toXstream = (stream, streamInterface) =>\n    Xstream.create({\n        start: function (listener) {\n            const observer = {\n                onNext: x => listener.next(x),\n                onError: x => listener.error(x),\n                onCompleted: x => listener.complete(x),\n            }\n            streamInterface(stream, observer)\n        },\n        stop: function () {}\n    })\n\n\nconst to = {\n  most: toMost,\n  rx: toRx,\n  bacon: toBacon,\n  kefir: toKefir,\n  xstream: toXstream,\n}\n\nexport default to\n","import interfaces from './interfaces'\nimport is from './is'\nimport to from './to'\n\nconst libraries = [\n  'most',\n  'rx',\n  'bacon',\n  'kefir',\n  'xstream',\n]\n\nconst makeTo = fromLib =>\n  libraries.reduce(\n    (acc, toLib) => {\n      acc[toLib] = stream => {\n        is[fromLib](stream)\n        return to[toLib](stream, interfaces[fromLib])\n      }\n      return acc\n    }, {})\n\nconst convert = libraries.reduce((acc, lib) => {\n  acc[lib] = {to: makeTo(lib)}\n  return acc\n}, {})\n\nexport default convert\n"],"names":["Observable"],"mappings":"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"}